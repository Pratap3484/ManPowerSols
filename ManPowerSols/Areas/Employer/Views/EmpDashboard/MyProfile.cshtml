
@{
    ViewBag.Title = "MyProfile";
    Layout = "~/Views/Shared/_EmployerLayout.cshtml";
}

<div class="progress mg-b-10" style="width:25%">
    <div class="progress-bar progress-bar-lg wd-50p" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">50%</div>
</div>
<div class="az-content-body" id="divprofile">
    <div class="row row-sm">
        <div class="col-xl-12">
            <div class="card card-dashboard-twentyone">
                <div class="row no-gutters">
                    <div class="col-md-12">
                        <div class="card-body">
                            <!-- <h6 class="az-content-label">My Profile</h6> -->
                            <div class="az-profile-overview">
                                <div class="" style="float:left">
                                    <img src="~/img/img10.jpg" id="profileimg" alt="Profile Image" style="height:60px;width:60px;">
                                </div><!-- az-img-user -->
                                <div style="float:right">
                                    <h5 class="az-profile-name" id="txtname"></h5>
                                    <p class="az-profile-name-text" id="txtdesignation"></p>
                                </div>
                                <br /><br />
                                <div class="d-flex justify-content-between mg-b-20">

                                    <div class="btn-icon-list" style="display:none">
                                        <button class="btn btn-indigo btn-icon"><i class="typcn typcn-plus-outline"></i></button>
                                        <button class="btn btn-primary btn-icon"><i class="typcn typcn-message"></i></button>
                                    </div>
                                </div>
                                <div class="" id="txtaboutme">
                                </div><!-- az-profile-bio -->
                                <hr class="">
                                <label class="az-content-label tx-13 mg-b-20">Personal Details</label>
                                <div class="az-profile-social-list">
                                    <div class="media">
                                        <div class="media-icon"><i class="icon ion-logo-github"></i></div>
                                        <div class="media-body">
                                            <span id="spanname"></span>
                                            <a href="#" id="txtdesgcompany"></a>
                                        </div>
                                    </div><!-- media -->
                                    <div class="media">
                                        <div class="media-icon"><i class="icon ion-logo-twitter"></i></div>
                                        <div class="media-body">
                                            <span>Email</span>
                                            <a href="#" id="txtemail">info@manpowersupplier.net</a>

                                        </div>
                                    </div><!-- media -->
                                    <div class="media">
                                        <div class="media-icon"><i class="icon ion-logo-linkedin"></i></div>
                                        <div class="media-body">
                                            <span>Phone</span>
                                            <a href="#" id="txtmobile"></a>
                                            <a href="#" id="txtmobile2" style="display:block"></a>
                                        </div>
                                    </div><!-- media -->
                                </div><!-- az-profile-social-list -->

                            </div>
                            <hr class="mg-y-40">
                            <div class="row">
                                <div class="col-md-7 col-xl-8" style="display:block">
                                    <div class="az-content-label tx-13 mg-b-25">Work &amp; Experience</div>
                                    <div class="az-profile-work-list">
                                        <div class="media">
                                            <div class="media-logo bg-success"><i class="icon ion-logo-buffer"></i></div>
                                            <div class="media-body">
                                                <h6 id="txtdesignation2"></h6> at <a href="#" id="txtcompany"></a>
                                                <label id="txtperiodofworking"></label> in <span id="txtcategory"></span> with <label id="txtexp"></label> of experience.
                                                <p id="txtsalary"></p>
                                            </div><!-- media-body -->
                                        </div><!-- media -->

                                    </div><!-- az-profile-work-list -->
                                </div><!-- col -->
                                <div class="col-md-5 col-xl-4 mg-t-40 mg-md-t-0">
                                    <div class="az-content-label tx-13 mg-b-25">Contact Information</div>
                                    <div class="az-profile-contact-list">
                                        <div class="media">
                                            <div class="media-icon"><i class="icon ion-md-phone-portrait"></i></div>
                                            <div class="media-body">
                                                <span>Mobile</span>
                                                <div id="divmobile"></div>
                                            </div><!-- media-body -->
                                        </div><!-- media -->
                                        <div class="media">
                                            <div class="media-icon"><i class="icon ion-md-locate"></i></div>
                                            <div class="media-body">
                                                <span>Current Address</span>
                                                <div id="divaddress"></div>
                                            </div><!-- media-body -->
                                        </div><!-- media -->
                                    </div><!-- az-profile-contact-list -->
                                </div><!-- col -->
                            </div>
                            <br />
                            <a href="../EmpDashboard/ProfileUpdate" class="btn-xs btn-primary" style="padding:5px" id="btneditprofile">
                                <img src="~/img/edit.png" style="cursor:pointer">
                                Edit Profile
                            </a>
                            <hr class="mg-y-40">
                        </div>
                    </div>

                </div><!-- row -->
            </div><!-- card -->
        </div><!-- col -->
        <div class="col-md-4 col-xl-3 mg-t-20" style="display:none">
            <div class="card card-body card-dashboard-twentythree ht-xl-100p">
                <h6 class="card-title tx-14 mg-b-10">Manage Deals</h6>
                <p class="mg-b-15">The percentage of manages the empoloyers request and agents posting.</p>

                <div class="d-flex flex-column align-items-center mg-b-25">
                    <div>
                        <div class="az-donut-chart chart1">
                            <div class="slice one"></div>
                            <div class="slice two"></div>
                            <div class="chart-center">
                                <span></span>
                            </div>
                        </div>
                    </div>
                </div><!-- d-flex -->

                <div class="row row-sm">
                    <div class="col-6">
                        <label><span class="bg-indigo"></span> Employers</label>
                        <h5>67%</h5>
                    </div>
                    <div class="col-6">
                        <label><span class="bg-gray-500"></span> Agents</label>
                        <h5>89%</h5>
                    </div>
                </div><!-- row -->
            </div>
        </div>
    </div><!-- row -->
</div>

<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="~/MpsJs/CommonJs.js"></script>
<script>
    $(document).ready(function () {
        getUserprofile(sessionStorage.getItem("usermailid"))
    })

    function getUserprofile(userid) {
        var up = {};
        up.UserID = userid;
        //up.UserID = 'prpdevobal@gmail.com';
        $.ajax({
            url: '/UserDashboard/GetUserProfile',
            type: 'POST',
            data: JSON.stringify(up),
            contentType: 'application/json; charset=utf-8',
            dataType: "json",
            success: function (res) {
                if (res.ResponseCode == "200") {
                    //$('.hdncls').show();
                    bindProfile(res.ResponseList.userdetails)
                }
                else if (res.ResponseCode == "201") {
                    bindProfile(res.ResponseList.userdetails)
                    //$('.hdncls').hide();
                }
                else if (res.ResponseCode == "100") {
                    alert('something went wrong! Please try again.')
                }
                else {
                    alert('Error : Status Code: ' + res.ResponseCode + '. Messsage' + res.ResponseMessage)
                }
            },
            error: function (err) {

            }
        });
    }

    function bindProfile(data) {
        $('#txtuserid').text(data[0].UserID);
        $('#txtrecid').text(data[0].Rec_ID);
        $('#txtname,#spanname').text(data[0].FirstName + ' ' + data[0].LastName);
        $('#txtdesignation').html(data[0].Designation == null ? '' : data[0].Designation);
        $('#txtaboutme').text(data[0].AboutMe == null ? '' : data[0].AboutMe);
        $('#txtdesgcompany').text(data[0].Designation == null ? '' : data[0].Designation + '-' + data[0].PresentCompanyName == null ? '' : data[0].PresentCompanyName)
        $('#txtemail').text(data[0].Email);
        $('#txtmobile,#divmobile').text(data[0].Mobile);
        $('#txtmobile2').text(data[0].Altenative_mobile == null ? '' : data[0].Altenative_mobile);
        $('#divaddress').text(data[0].City == null ? '' : data[0].City + ', ' + data[0].State == null ? '' : data[0].State + ', ' + data[0].Country == null ? '' : data[0].Country + ' - ' + data[0].zipcode == null ? '' : data[0].zipcode);
        $('#txtcompany').text(data[0].PresentCompanyName == null ? '' : data[0].PresentCompanyName);
        $('#txtdesignation2').text(data[0].Designation == null ? '' : data[0].Designation)
        $('#txtperiodofworking').text(data[0].PeriodOfWorking == null ? '' : data[0].PeriodOfWorking);
        $("#txtcategory").text(data[0].Work_Sector == null ? '' : data[0].Work_Sector);
        $('#txtexp').text(data[0].Experience == null ? '' : data[0].Experience);
        $('#txtsalary').text('Salary: '+data[0].CurrencyType == '' ? 'N/A' : data[0].CurrencyType.split('-')[0] + '' + data[0].Last_Salary + '-' + data[0].CurrencyType.split('-')[1]);
        //console.log(data[0].Resume=null?'':data[0].Resume)
        //alert(data[0].ImgPath)
        //$('#divresumecontent').html(data[0].Resume);
        
        $('#profileimg').attr('src', data[0].ImgPath == '' || data[0].ImgPath == null ? 'http://mps.manpowersupplier.net/img/admin.png' : data[0].ImgPath)
    }

</script>
